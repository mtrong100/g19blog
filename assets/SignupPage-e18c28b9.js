import{b as g,r as c,Q as d,j as e,L as w,i as j,a as r,H as b,I as y,K as P,m as E,d as S}from"./index-7966c32c.js";import{s as H}from"./slugify-d0b16201.js";import{c as U,a as t,u as N,F as o,L as n,I as u,b as A,o as B}from"./yup-f53c851f.js";import{A as v,I as F}from"./AuthPage-c49b19b0.js";import{B as I}from"./Button-dce2d53f.js";import{u as L}from"./constants-c6ed1daf.js";import"./index.esm-0fd3d51b.js";import"./Logo-3c21e70c.js";const M=U({username:t().max(20,"Username cannot exceed 20 characters").required("Please enter your username"),email:t().lowercase().email("Please enter valid email").required("Please enter your email"),password:t().max(8,"Your password must be 8 characters").required("Please enter your password")}),W=()=>{const p=g(),{control:a,handleSubmit:x,formState:{isValid:h,isSubmitting:i,errors:l}}=N({mode:"onchange",resolver:B(M)});c.useEffect(()=>{document.title="SignUp Page"},[]);const f=async s=>{h&&(await j(r,s.email,s.password),await b(r.currentUser,{displayName:s.username,photoURL:"https://images.unsplash.com/photo-1618005198919-d3d4b5a92ead?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80"}),await y(E(S,"users",r.currentUser.uid),{username:s.username,email:s.email,password:s.password,role:L.USER,slug:H(s.username,{lower:!0}),avatar:"https://images.unsplash.com/photo-1618005198919-d3d4b5a92ead?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",createdAt:P()}),d.success("Create user successfully !",{theme:"colored",autoClose:2e3,pauseOnHover:!1}),p("/"))};return c.useEffect(()=>{var m;const s=Object.values(l);s.length>0&&d.error((m=s[0])==null?void 0:m.message,{theme:"colored",autoClose:2e3,pauseOnHover:!1})},[l]),e.jsx("section",{className:"flex items-center justify-center h-screen signupBG",children:e.jsx("div",{className:"page-container",children:e.jsx("form",{onSubmit:x(f),className:"w-full border-gradient max-w-[600px] p-10 shadow-lg glass-design rounded-lg mx-auto",children:e.jsxs(v,{children:[e.jsxs(o,{children:[e.jsx(n,{htmlFor:"username",children:"Username"}),e.jsx(u,{name:"username",placeholder:"Enter your username...",control:a})]}),e.jsxs(o,{children:[e.jsx(n,{htmlFor:"email",children:"Email"}),e.jsx(u,{name:"email",placeholder:"Enter your email...",control:a})]}),e.jsxs(o,{children:[e.jsx(n,{htmlFor:"password",children:"Password"}),e.jsx(F,{control:a}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold normal-case select-none",children:[e.jsx("p",{children:"Already have an account?"}),e.jsx(w,{to:"/sign-in",className:"cursor-pointer text-colorPink",children:"SignIn"})]})]}),e.jsx(I,{type:"submit",kind:"secondary",className:`w-full h-[53px] md:h-[60px] font-semibold md:text-xl ${i?"opacity-50 pointer-events-none":""}`,children:i?e.jsx(A,{}):"Sign up"})]})})})})};export{W as default};
