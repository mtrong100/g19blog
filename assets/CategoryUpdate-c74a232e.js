import{u as O,b as R,k as w,r as i,Q as l,j as e,m as g,d as f,c as A,l as S}from"./index-59f0801a.js";import{s as C}from"./slugify-968d5356.js";import{R as d}from"./Radio-87b0046e.js";import{c as U,a as V,u as k,F as x,L as y,I as F,b as H,o as G}from"./yup-b6308ea4.js";import{H as L}from"./Heading-e7981ca2.js";import{B}from"./Button-fd1b6758.js";import{u as j,c as r}from"./constants-c6ed1daf.js";const I=U({title:V().required("Please enter your title !")}),K=()=>{const{userInfo:s}=O(),v=R(),[E]=w(),c=E.get("id"),{control:o,handleSubmit:P,watch:N,reset:u,formState:{isValid:b,isSubmitting:m,errors:h}}=k({mode:"onchange",resolver:G(I),defaultValues:{}}),n=N("status");i.useEffect(()=>{document.title="G19BLOG - Update Category"},[]),i.useEffect(()=>{async function t(){const a=g(f,"categories",c),p=await A(a);u(p&&p.data())}t()},[c,u]);const D=async t=>{if(b)try{const a=g(f,"categories",c);await S(a,{title:t.title,slug:C(t.title,{lower:!0}),status:t.status}),l.success("Add new category successfully !",{theme:"colored",autoClose:2e3,pauseOnHover:!1}),v("/manage/category")}catch{l.error("Failed to add new category !",{theme:"colored",autoClose:2e3,pauseOnHover:!1})}};return i.useEffect(()=>{var a;const t=Object.values(h);t.length>0&&l.error((a=t[0])==null?void 0:a.message,{theme:"colored",autoClose:2e3,pauseOnHover:!1})},[h]),e.jsxs("div",{children:[e.jsx(L,{children:"update category"}),e.jsxs("form",{className:"pt-14",onSubmit:P(D),children:[e.jsxs("div",{className:"grid grid-cols-2 gap-10 mb-10",children:[e.jsxs(x,{children:[e.jsx(y,{children:"Title ‚úíÔ∏è"}),e.jsx(F,{control:o,placeholder:"Enter your title",name:"title"})]}),((s==null?void 0:s.role)===j.ADMIN||(s==null?void 0:s.role)===j.MOD)&&e.jsx(e.Fragment,{children:e.jsxs(x,{children:[e.jsx(y,{children:"Status üìâ"}),e.jsxs("div",{className:"flex items-center gap-x-5",children:[e.jsx(d,{name:"status",control:o,checked:n===r.APPROVED,value:r.APPROVED,children:"Approved"}),e.jsx(d,{name:"status",control:o,checked:n===r.PENDING,value:r.PENDING,children:"Pending"}),e.jsx(d,{name:"status",control:o,checked:n===r.UNAPPROVED,value:r.UNAPPROVED,children:"Unapproved"})]})]})})]}),e.jsx(B,{type:"submit",kind:"secondary",className:`w-[250px] mx-auto h-[65px] font-semibold text-xl ${m?"opacity-50 pointer-events-none":""}`,children:m?e.jsx(H,{}):"update category"})]})]})};export{K as default};
