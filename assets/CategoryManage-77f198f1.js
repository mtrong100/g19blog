import{u as D,b as A,r,j as e,_ as E,d as p,p as P,m as S,g as R,Q as h}from"./index-f4999a5f.js";import{T as k,I,a as O}from"./IconDelete-29764fae.js";import{S as g}from"./sweetalert2.all-b21a6cf2.js";import{L as c}from"./LabelStatus-2d3dd161.js";import{H as B}from"./Heading-dd06bb81.js";import{B as M}from"./Button-2a8f4be9.js";import{a as T}from"./data-36aedd86.js";import{c as s,u as m}from"./constants-c6ed1daf.js";import{A as H}from"./index.esm-45f7dd71.js";import{v as L}from"./v4-a960c1f4.js";const K=()=>{const{userInfo:a}=D(),f=A(),[y,j]=r.useState([]),[i,b]=r.useState(""),[o,v]=r.useState("all"),C=t=>{switch(t){case s.APPROVED:return e.jsx(c,{type:"success",children:"Approved"});case s.PENDING:return e.jsx(c,{type:"warning",children:"Pending"});case s.REJECTED:return e.jsx(c,{type:"danger",children:"Rejected"})}};r.useEffect(()=>{async function t(){const l=E(p,"categories");P(l,n=>{let u=[];n.forEach(x=>{u.push({id:x.id,...x.data()})}),j(u)})}t()},[]);const d=y.filter(t=>t.title.toLowerCase().includes(i.toLowerCase())).filter(t=>o==="all"?!0:t.status===o),N=async t=>{const l=S(p,"categories",t);(a==null?void 0:a.role)===m.ADMIN?g.fire({title:"Are you sure you want to delete this category?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async n=>{n.isConfirmed&&(await R(l),g.fire("Deleted!","Your category has been deleted.","success"))}):h.error("Only ADMIN & MOD can delete!",{theme:"colored",autoClose:2e3,pauseOnHover:!1})},w=t=>{a.role===m.ADMIN?f(`/manage/update-category?id=${t}`):h.error("only ADMIN can edit category !",{theme:"colored",autoClose:2e3,pauseOnHover:!1})};return e.jsxs(e.Fragment,{children:[e.jsx(B,{children:"categories manage"}),e.jsxs("div",{className:"flex flex-col justify-between gap-10 py-10 lg:gap-0 lg:flex-row",children:[e.jsx(M,{type:"button",kind:"secondary",className:"h-[55px]",path:"/manage/add-category",children:"Add new category"}),e.jsxs("div",{className:"flex items-center gap-10",children:[e.jsxs("select",{className:"py-2 w-[150px] text-lg border border-solid rounded bg-colorDime border-colorPink",value:o,onChange:t=>v(t.target.value),children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:s.APPROVED,children:"Approved"}),e.jsx("option",{value:s.PENDING,children:"Pending"}),e.jsx("option",{value:s.UNAPPROVED,children:"Unapproved"})]}),e.jsxs("div",{className:"w-full flex items-center py-4 px-5 gap-3 max-w-[300px] border-2 border-solid rounded-full border-colorPink",children:[e.jsx("span",{className:"text-2xl",children:e.jsx(H,{})}),e.jsx("input",{value:i,onChange:t=>b(t.target.value),type:"text",className:"w-full",placeholder:"Search category..."})]})]})]}),e.jsxs(k,{children:[e.jsx("thead",{children:e.jsx("tr",{children:T.map(t=>e.jsx("th",{children:t},L()))})}),e.jsx("tbody",{children:d.length>0&&d.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("span",{className:"text-xs font-semibold text-gray-500 capitalize lg:text-base ",children:t.id})}),e.jsx("td",{children:e.jsx("span",{className:"hover:opacity-90 capitalize select-none inline-block w-fit px-4 text-center rounded-lg font-semibold bg-colorDark italic text-colorPink text-sm py-[10px]",children:t.title})}),e.jsx("td",{children:C(t.status)}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center text-gray-500 gap-x-3",children:[e.jsx(I,{onClick:()=>w(t.id)}),e.jsx(O,{onClick:()=>N(t.id)})]})})]},t.id))})]})]})};export{K as default};
